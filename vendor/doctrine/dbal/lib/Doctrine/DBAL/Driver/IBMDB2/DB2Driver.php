<?php
 namespace Doctrine\DBAL\Driver\IBMDB2; use Doctrine\DBAL\Driver\AbstractDB2Driver; class DB2Driver extends AbstractDB2Driver { public function connect(array $params, $username = null, $password = null, array $driverOptions = array()) { if ( ! isset($params['protocol'])) { $params['protocol'] = 'TCPIP'; } if ($params['host'] !== 'localhost' && $params['host'] != '127.0.0.1') { $params['dbname'] = 'DRIVER={IBM DB2 ODBC DRIVER}' . ';DATABASE=' . $params['dbname'] . ';HOSTNAME=' . $params['host'] . ';PROTOCOL=' . $params['protocol'] . ';UID=' . $username . ';PWD=' . $password .';'; if (isset($params['port'])) { $params['dbname'] .= 'PORT=' . $params['port']; } $username = null; $password = null; } return new DB2Connection($params, $username, $password, $driverOptions); } public function getName() { return 'ibm_db2'; } } 
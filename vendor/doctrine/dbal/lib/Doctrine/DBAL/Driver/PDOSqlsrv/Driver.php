<?php
 namespace Doctrine\DBAL\Driver\PDOSqlsrv; use Doctrine\DBAL\Driver\AbstractSQLServerDriver; class Driver extends AbstractSQLServerDriver { public function connect(array $params, $username = null, $password = null, array $driverOptions = array()) { return new Connection( $this->_constructPdoDsn($params), $username, $password, $driverOptions ); } private function _constructPdoDsn(array $params) { $dsn = 'sqlsrv:server='; if (isset($params['host'])) { $dsn .= $params['host']; } if (isset($params['port']) && !empty($params['port'])) { $dsn .= ',' . $params['port']; } if (isset($params['dbname'])) { $dsn .= ';Database=' . $params['dbname']; } if (isset($params['MultipleActiveResultSets'])) { $dsn .= '; MultipleActiveResultSets=' . ($params['MultipleActiveResultSets'] ? 'true' : 'false'); } return $dsn; } public function getName() { return 'pdo_sqlsrv'; } } 
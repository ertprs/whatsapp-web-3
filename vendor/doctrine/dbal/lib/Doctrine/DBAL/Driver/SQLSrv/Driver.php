<?php
 namespace Doctrine\DBAL\Driver\SQLSrv; use Doctrine\DBAL\Driver\AbstractSQLServerDriver; class Driver extends AbstractSQLServerDriver { public function connect(array $params, $username = null, $password = null, array $driverOptions = array()) { if (!isset($params['host'])) { throw new SQLSrvException("Missing 'host' in configuration for sqlsrv driver."); } $serverName = $params['host']; if (isset($params['port'])) { $serverName .= ', ' . $params['port']; } if (isset($params['dbname'])) { $driverOptions['Database'] = $params['dbname']; } if (isset($params['charset'])) { $driverOptions['CharacterSet'] = $params['charset']; } $driverOptions['UID'] = $username; $driverOptions['PWD'] = $password; if (!isset($driverOptions['ReturnDatesAsStrings'])) { $driverOptions['ReturnDatesAsStrings'] = 1; } return new SQLSrvConnection($serverName, $driverOptions); } public function getName() { return 'sqlsrv'; } } 
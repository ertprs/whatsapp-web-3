<?php
 namespace Doctrine\DBAL\Schema; use Doctrine\DBAL\Platforms\AbstractPlatform; class TableDiff { public $name = null; public $newName = false; public $addedColumns; public $changedColumns = array(); public $removedColumns = array(); public $renamedColumns = array(); public $addedIndexes = array(); public $changedIndexes = array(); public $removedIndexes = array(); public $renamedIndexes = array(); public $addedForeignKeys = array(); public $changedForeignKeys = array(); public $removedForeignKeys = array(); public $fromTable; public function __construct($tableName, $addedColumns = array(), $changedColumns = array(), $removedColumns = array(), $addedIndexes = array(), $changedIndexes = array(), $removedIndexes = array(), Table $fromTable = null) { $this->name = $tableName; $this->addedColumns = $addedColumns; $this->changedColumns = $changedColumns; $this->removedColumns = $removedColumns; $this->addedIndexes = $addedIndexes; $this->changedIndexes = $changedIndexes; $this->removedIndexes = $removedIndexes; $this->fromTable = $fromTable; } public function getName(AbstractPlatform $platform) { return new Identifier( $this->fromTable instanceof Table ? $this->fromTable->getQuotedName($platform) : $this->name ); } public function getNewName() { return $this->newName ? new Identifier($this->newName) : $this->newName; } } 
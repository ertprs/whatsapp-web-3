<?php
 namespace Doctrine\DBAL\Types; use Doctrine\DBAL\Platforms\AbstractPlatform; class BlobType extends Type { public function getSQLDeclaration(array $fieldDeclaration, AbstractPlatform $platform) { return $platform->getBlobTypeDeclarationSQL($fieldDeclaration); } public function convertToPHPValue($value, AbstractPlatform $platform) { if (null === $value) { return null; } if (is_string($value)) { $fp = fopen('php://temp', 'rb+'); fwrite($fp, $value); fseek($fp, 0); $value = $fp; } if ( ! is_resource($value)) { throw ConversionException::conversionFailed($value, self::BLOB); } return $value; } public function getName() { return Type::BLOB; } public function getBindingType() { return \PDO::PARAM_LOB; } } 
<?php
 namespace GeckoPackages\Silex\Services\Config\Loader; use Symfony\Component\Filesystem\Exception\FileNotFoundException; use Symfony\Component\Filesystem\Exception\IOException; use Symfony\Component\Yaml\Exception\ParseException; use Symfony\Component\Yaml\Parser; final class YamlLoader implements LoaderInterface { private $parser; public function __construct() { $this->parser = new Parser(); } public function getConfig($file) { if (false === is_file($file)) { throw new FileNotFoundException(sprintf('Config file not found "%s".', $file)); } if (false === $config = @file_get_contents($file)) { throw new IOException(sprintf('Failed to load config file "%s".', $file)); } try { $config = $this->parser->parse($config); } catch (ParseException $e) { throw new IOException(sprintf('Failed to parse config file "%s". %s', $file, $e->getMessage()), $e->getCode(), $e); } return $config; } } 
<?php
 namespace Silex; use Symfony\Component\HttpFoundation\Request; use Symfony\Component\HttpKernel\Controller\ControllerResolverInterface; class ServiceControllerResolver implements ControllerResolverInterface { protected $controllerResolver; protected $callbackResolver; public function __construct(ControllerResolverInterface $controllerResolver, CallbackResolver $callbackResolver) { $this->controllerResolver = $controllerResolver; $this->callbackResolver = $callbackResolver; } public function getController(Request $request) { $controller = $request->attributes->get('_controller', null); if (!$this->callbackResolver->isValid($controller)) { return $this->controllerResolver->getController($request); } return $this->callbackResolver->convertCallback($controller); } public function getArguments(Request $request, $controller) { return $this->controllerResolver->getArguments($request, $controller); } } 